(this["webpackJsonpreact-first-project"]=this["webpackJsonpreact-first-project"]||[]).push([[0],{102:function(e,t,n){e.exports={postsBlock:"MyPosts_postsBlock__2CAu-",posts:"MyPosts_posts__31Mc2"}},141:function(e,t,n){e.exports={album:"Profile_album__xGVoS"}},142:function(e,t,n){e.exports={content:"Post_content__He3Ov",item:"Post_item__3djRZ"}},15:function(e,t,n){e.exports={nav:"Navbar_nav__1Ie6w",item:"Navbar_item__1CFDi",active:"Navbar_active__3HjG6",friendsListWrapper:"Navbar_friendsListWrapper__3iQY4",friendsList:"Navbar_friendsList__CSsC9"}},169:function(e,t,n){},252:function(e,t,n){},296:function(e,t,n){"use strict";n.r(t);var s,r=n(1),i=n.n(r),a=(n(169),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,297)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),i(e),a(e)}))}),c=n(8),o=n(14),u=n.n(o),l=n(28),d=n(39),j=n(3),b=n(27),f=n(134),p=n.n(f).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"07442674-e8bd-4bdd-b7b5-95e92db8d98b"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(s||(s={}));var h=function(e){return p.get("profile/".concat(e)).then((function(e){return e.data}))},O=function(e){return p.get("profile/status/".concat(e)).then((function(e){return e.data}))},g=function(e){return p.put("profile/status",{status:e}).then((function(e){return e.data}))},m=function(e){var t=new FormData;return t.append("image",e),p.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},x=function(e){return p.put("profile",e).then((function(e){return e.data}))},v={posts:[{id:1,text:"Sveta",likesCount:1},{id:2,text:"Sasha",likesCount:3},{id:3,text:"Dima",likesCount:5},{id:4,text:"Kolya",likesCount:6},{id:5,text:"Artem",likesCount:7},{id:6,text:"Vika",likesCount:8}],profile:null,status:""},S={addPostActionCreator:function(e){return{type:"SN/PROFILE/ADD-POST",newPostText:e}},setUserProfile:function(e){return{type:"SN/PROFILE/SET-USER-PROFILE",profile:e}},setStatus:function(e){return{type:"SN/PROFILE/SET-STATUS",status:e}},savePhotoSuccess:function(e){return{type:"SN/PROFILE/SET-PHOTO-SUCCESS",photos:e}}},P=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:s=t.sent,n(S.setUserProfile(s));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/PROFILE/ADD-POST":var n={id:7,text:t.newPostText,likesCount:0};return Object(j.a)(Object(j.a)({},e),{},{posts:[].concat(Object(d.a)(e.posts),[n])});case"SN/PROFILE/SET-USER-PROFILE":return Object(j.a)(Object(j.a)({},e),{},{profile:t.profile});case"SN/PROFILE/SET-STATUS":return Object(j.a)(Object(j.a)({},e),{},{status:t.status});case"SN/PROFILE/SET-PHOTO-SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{profile:Object(j.a)(Object(j.a)({},e.profile),{},{photos:t.photos})});default:return e}},C={dialogs:[{id:1,name:"Sveta"},{id:2,name:"Sasha"},{id:3,name:"Dima"},{id:4,name:"Kolya"},{id:5,name:"Artem"},{id:6,name:"Vika"}],messages:[{id:1,message:"Hello"},{id:2,message:"Hi"},{id:3,message:"How old are you?"},{id:4,message:"I'm 26 yo"},{id:5,message:"Are you here?"},{id:6,message:"Yes"}]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/dialogs/ADD-MESSAGE":var n={id:7,message:t.newMessageText};return Object(j.a)(Object(j.a)({},e),{},{messages:[].concat(Object(d.a)(e.messages),[n])});default:return e}},N={friends:[{id:1,avatar:"http://archilab.online/images/1/123.jpg",name:"Dima"},{id:2,avatar:"https://demiart.ru/forum/journal_uploads13/j2406363_1591724080_0.jpg",name:"Sveta"},{id:3,avatar:"https://www.meme-arsenal.com/memes/0b37d82bcfd11cb3196fa5329f3bff0f.jpg",name:"Artem"}]},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return e},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return p.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===s?"":"&friend=".concat(s))).then((function(e){return e.data}))},I=function(e){return p.post("follow/".concat(e)).then((function(e){return e.data}))},T=function(e){return p.delete("follow/".concat(e)).then((function(e){return e.data}))},F={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[],filter:{term:"",friend:null}},k={followSuccess:function(e){return{type:"FOLLOW",userId:e}},unfollowSuccess:function(e){return{type:"UNFOLLOW",userId:e}},setUsers:function(e){return{type:"SET_USERS",users:e}},setTotalUsersCount:function(e){return{type:"SET_TOTAL_USERS_COUNT",totalCount:e}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},toggleIsFetching:function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},toggleFollowingProgress:function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},setFilter:function(e){return{type:"SET_FILTER",payload:e}}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(j.a)(Object(j.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(j.a)(Object(j.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(j.a)(Object(j.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(j.a)(Object(j.a)({},e),{},{users:Object(d.a)(t.users)});case"SET_CURRENT_PAGE":return Object(j.a)(Object(j.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(j.a)(Object(j.a)({},e),{},{totalUsersCount:t.totalCount});case"TOGGLE_IS_FETCHING":return Object(j.a)(Object(j.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(j.a)(Object(j.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(d.a)(e.followingInProgress),[t.userId]):Object(d.a)(e.followingInProgress.filter((function(e){return e!==t.userId})))});case"SET_FILTER":return Object(j.a)(Object(j.a)({},e),{},{filter:t.payload});default:return e}},U=function(){return p.get("auth/me").then((function(e){return e.data}))},L=function(e,t,n){return p.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},D=function(){return p.delete("auth/login").then((function(e){return e.data}))},R={userId:null,email:null,login:null,isAuth:!1},M=function(e,t,n,s){return{type:"SN/AUTH/SET-USER-DATA",data:{userId:e,email:t,login:n,isAuth:s}}},z=function(){return function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,i,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:(n=e.sent).resultCode===s.Success&&(r=n.data,i=r.id,a=r.login,c=r.email,t(M(i,c,a,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/AUTH/SET-USER-DATA":return Object(j.a)(Object(j.a)(Object(j.a)({},e),t.data),{},{isAuth:t.data.isAuth});default:return e}},H=n(135),B=n(133),W={initialized:!1},V={initializedSuccess:function(){return{type:"SN/APP/SET-INITIALIZED"}}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SN/APP/SET-INITIALIZED":return Object(j.a)(Object(j.a)({},e),{},{initialized:!0});default:return e}},K=Object(c.c)({profilePage:_,messagesPage:w,sidebar:E,usersPage:A,auth:G,form:B.a,app:J}),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,X=Object(c.e)(K,Y(Object(c.a)(H.a)));window.__store__=X;var Z=X,q=n(73),Q=n.n(q),$=n(35),ee=n(36),te=n(38),ne=n(37),se=(n(252),n(13)),re=n(11),ie=n(0),ae=function(){return Object(ie.jsx)("div",{children:"News"})},ce=function(){return Object(ie.jsx)("div",{children:"Music"})},oe=function(){return Object(ie.jsx)("div",{children:"Settings"})},ue=n(30),le=n.n(ue),de=function(e){return Object(ie.jsx)("div",{className:le.a.dialog+" "+le.a.active,children:Object(ie.jsx)(se.b,{to:"/dialogs/".concat(e.id),children:e.name})})},je=function(e){return Object(ie.jsx)("div",{className:le.a.message,children:e.message})},be=n(132),fe=function(e){if(!e)return"Field is required"},pe=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}},he=n(45),Oe=n(43),ge=n.n(Oe),me=n(131),xe=function(e){var t=e.meta,n=t.touched,s=t.error,r=e.children,i=n&&s;return Object(ie.jsxs)("div",{className:"".concat(ge.a.formControl," ").concat(i?ge.a.error:""),children:[Object(ie.jsx)("div",{children:r}),i&&Object(ie.jsx)("span",{children:s})]})},ve=function(e){var t=e.input,n=(e.meta,Object(he.a)(e,["input","meta"]));return Object(ie.jsx)(xe,Object(j.a)(Object(j.a)({},e),{},{children:Object(ie.jsx)("textarea",Object(j.a)(Object(j.a)({},t),n))}))},Se=function(e){var t=e.input,n=(e.meta,Object(he.a)(e,["input","meta"]));return Object(ie.jsx)(xe,Object(j.a)(Object(j.a)({},e),{},{children:Object(ie.jsx)("input",Object(j.a)(Object(j.a)({},t),n))}))};function Pe(e,t,n,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(ie.jsxs)("div",{children:[Object(ie.jsx)(me.a,Object(j.a)({placeholder:e,name:t,validate:n,component:s},r))," ",i]})}var _e=pe(50),Ce=Object(be.a)({form:"dialogs"})((function(e){return Object(ie.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(ie.jsx)("div",{children:Pe("Enter new message text","newMessageText",[fe,_e],ve)}),Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})})),we=function(e){var t=e.messagesPage.dialogs.map((function(e){return Object(ie.jsx)(de,{name:e.name,id:e.id},e.id)})),n=e.messagesPage.messages.map((function(e){return Object(ie.jsx)(je,{message:e.message},e.id)}));return Object(ie.jsxs)("div",{className:le.a.dialogs,children:[Object(ie.jsx)("div",{className:le.a.dialogsItems,children:t}),Object(ie.jsxs)("div",{className:le.a.messages,children:[Object(ie.jsx)("div",{children:n}),Object(ie.jsx)(Ce,{onSubmit:function(t){e.sendMessage(t.newMessageText)}})]})]})},Ne=n(10),Ee=function(e){return{isAuth:e.auth.isAuth}};function ye(e){return Object(Ne.b)(Ee)((function(t){if(!t.isAuth)return Object(ie.jsx)(re.a,{to:"/login"});t.isAuth;var n=Object(he.a)(t,["isAuth"]);return Object(ie.jsx)(e,Object(j.a)({},n))}))}var Ie=Object(c.d)(Object(Ne.b)((function(e){return{messagesPage:e.messagesPage}}),{sendMessage:function(e){return{type:"SN/dialogs/ADD-MESSAGE",newMessageText:e}}}),ye)(we),Te=n(15),Fe=n.n(Te),ke=function(e){return Object(ie.jsxs)("nav",{className:Fe.a.nav,children:[Object(ie.jsx)("div",{className:Fe.a.item,children:Object(ie.jsx)(se.b,{to:"/profile",activeClassName:Fe.a.active,children:"Profile"})}),Object(ie.jsx)("div",{className:Fe.a.item,children:Object(ie.jsx)(se.b,{to:"/dialogs",activeClassName:Fe.a.active,children:"Messages"})}),Object(ie.jsx)("div",{className:Fe.a.item,children:Object(ie.jsx)(se.b,{to:"/users",activeClassName:Fe.a.active,children:"Users"})}),Object(ie.jsx)("div",{className:Fe.a.item,children:Object(ie.jsx)(se.b,{to:"/news",activeClassName:Fe.a.active,children:"News"})}),Object(ie.jsx)("div",{className:Fe.a.item,children:Object(ie.jsx)(se.b,{to:"/music",activeClassName:Fe.a.active,children:"Music"})}),Object(ie.jsx)("div",{className:Fe.a.item,children:Object(ie.jsx)(se.b,{to:"/settings",activeClassName:Fe.a.active,children:"Settings"})}),Object(ie.jsxs)("div",{className:Fe.a.friendsListWrapper,children:[Object(ie.jsx)("h3",{className:Fe.a.friendsHeader,children:"Friends"}),Object(ie.jsx)("div",{className:Fe.a.friendsList})]})]})},Ae=Object(Ne.b)((function(e){return{state:e.sidebar}}),(function(e){return{}}))(ke),Ue=n(52),Le=n.n(Ue),De=n.p+"static/media/default_user.ab7efdc7.png",Re=n(76),Me=n(44),ze=n(138),Ge=n.n(ze),He=function(e){for(var t=e.totalUsersCount,n=e.pageSize,s=e.currentPage,i=e.onPageChanged,a=e.portionSize,c=void 0===a?10:a,o=Math.ceil(t/n),u=[],l=1;l<=o;l++)u.push(l);var d=Math.ceil(o/c),j=Object(r.useState)(1),b=Object(Me.a)(j,2),f=b[0],p=b[1],h=(f-1)*c+1,O=f*c;return Object(ie.jsxs)("div",{className:Le.a.paginator,children:[f>1&&Object(ie.jsx)("button",{onClick:function(){p(f-1)},children:"PREV"}),u.filter((function(e){return e>=h&&e<=O})).map((function(e){return Object(ie.jsx)("span",{className:Ge()(Object(Re.a)({},Le.a.selectedPage,s===e),Le.a.pageNumber),onClick:function(t){i(e)},children:e},e)})),d>f&&Object(ie.jsx)("button",{onClick:function(){p(f+1)},children:"NEXT"})]})},Be=n(63),We=function(e){return{}},Ve=i.a.memo((function(e){return Object(ie.jsx)("div",{children:Object(ie.jsx)(Be.c,{initialValues:{term:"",friend:"null"},validate:We,onSubmit:function(t,n){var s=n.setSubmitting,r={term:t.term,friend:"null"===t.friend?null:"true"===t.friend};e.onFilterChanged(r),s(!1)},children:function(e){var t=e.isSubmitting;return Object(ie.jsxs)(Be.b,{children:[Object(ie.jsx)(Be.a,{type:"text",name:"term"}),Object(ie.jsxs)(Be.a,{as:"select",name:"friend",children:[Object(ie.jsx)("option",{value:"null",children:"All"}),Object(ie.jsx)("option",{value:"true",children:"Only followed"}),Object(ie.jsx)("option",{value:"false",children:"Only unfollowed"})]}),Object(ie.jsx)("button",{type:"submit",disabled:t,children:"Find"})]})}})})})),Je=function(e){var t=e.currentPage,n=e.totalUsersCount,s=e.pageSize,r=e.onPageChanged,i=e.users,a=e.followingInProgress,c=e.unfollow,o=e.follow,u=Object(he.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","users","followingInProgress","unfollow","follow"]);return Object(ie.jsxs)("div",{children:[Object(ie.jsx)(Ve,{onFilterChanged:u.onFilterChanged}),Object(ie.jsx)(He,{currentPage:t,onPageChanged:r,totalUsersCount:n,pageSize:s}),i.map((function(e){return Object(ie.jsxs)("div",{children:[Object(ie.jsxs)("span",{children:[Object(ie.jsx)("div",{children:Object(ie.jsx)(se.b,{to:"/profile/"+e.id,children:Object(ie.jsx)("img",{src:null!=e.photos.small?e.photos.small:De,className:Le.a.userPhoto,alt:""})})}),Object(ie.jsx)("div",{children:e.followed?Object(ie.jsx)("button",{disabled:a.some((function(t){return t===e.id})),onClick:function(){return c(e.id)},children:"Unfollow"}):Object(ie.jsx)("button",{disabled:a.some((function(t){return t===e.id})),onClick:function(){return o(e.id)},children:"Follow"})})]}),Object(ie.jsxs)("span",{children:[Object(ie.jsxs)("span",{children:[Object(ie.jsx)("div",{children:e.name}),Object(ie.jsx)("div",{children:e.status})]}),Object(ie.jsxs)("span",{children:[Object(ie.jsx)("div",{children:"user.location.country"}),Object(ie.jsx)("div",{children:"user.location.city"})]})]})]},e.id)}))]})},Ke=n.p+"static/media/loader.9637ee70.svg",Ye=function(){return Object(ie.jsx)("div",{children:Object(ie.jsx)("img",{alt:"",src:Ke})})},Xe=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){var e;Object($.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){var n=e.props,s=n.pageSize,r=n.filter;e.props.setCurrentPage(t),e.props.getUsers(t,s,r)},e.onFilterChanged=function(t){var n=e.props.pageSize;e.props.getUsers(1,n,t)},e}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize,this.props.filter)}},{key:"render",value:function(){return Object(ie.jsxs)(ie.Fragment,{children:[this.props.isFetching?Object(ie.jsx)(Ye,{}):null,Object(ie.jsx)(Je,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,onFilterChanged:this.onFilterChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress})]})}}]),n}(i.a.Component),Ze=Object(c.d)(Object(Ne.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress,filter:e.usersPage.filter}}),{setCurrentPage:k.setCurrentPage,getUsers:function(e,t,n){return function(s,r){s(k.toggleIsFetching(!0)),s(k.setFilter(n)),y(e,t,n.term,n.friend).then((function(e){s(k.setUsers(e.items)),s(k.setTotalUsersCount(e.totalCount)),s(k.toggleIsFetching(!1))}))}},follow:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(k.toggleFollowingProgress(!0,e)),t.next=3,I(e);case 3:0===t.sent.resultCode&&(n(k.followSuccess(e)),n(k.toggleFollowingProgress(!1,e)));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(t){t(k.toggleFollowingProgress(!0,e)),T(e).then((function(n){0===n.resultCode&&(t(k.unfollowSuccess(e)),t(k.toggleFollowingProgress(!1,e)))}))}}}),ye)(Xe),qe=n(141),Qe=n.n(qe),$e=n(46),et=n.n($e),tt=function(e){var t=Object(r.useState)(!1),n=Object(Me.a)(t,2),s=n[0],i=n[1],a=Object(r.useState)(e.status),c=Object(Me.a)(a,2),o=c[0],u=c[1];Object(r.useEffect)((function(){u(e.status)}),[e.status]);return Object(ie.jsxs)(ie.Fragment,{children:[!s&&Object(ie.jsx)("div",{children:Object(ie.jsxs)("span",{onDoubleClick:function(){i(!0)},children:["Status: ",e.status]})}),s&&Object(ie.jsx)("div",{children:Object(ie.jsx)("input",{autoFocus:!0,onChange:function(e){u(e.currentTarget.value)},onBlur:function(){i(!1),e.updateStatus(o)},value:o})})]})},nt=Object(be.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,n=e.profile,s=e.error;return Object(ie.jsxs)("form",{onSubmit:t,children:[Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{children:"Save"})}),s&&Object(ie.jsx)("div",{className:ge.a.formSummaryError,children:s}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("b",{children:"Full name:"}),Pe("Full name","fullName",[],Se)]}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("b",{children:"Looking for a job:"}),Pe("","lookingForAJob",[],Se,{type:"checkbox"})]}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("b",{children:"My professional skills:"}),Pe("My professional skills","lookingForAJobDescription",[],ve)]}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("b",{children:"About me: "}),Pe("About me","aboutMe",[],ve)]}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("b",{children:"Contacts: "}),Object.keys(n.contacts).map((function(e){return Object(ie.jsxs)("div",{className:et.a.contacts,children:[Object(ie.jsxs)("b",{children:[e,": "]})," ",Pe(e,"contacts."+e,[],Se)]},e)}))]})]})})),st=function(e){return Object(ie.jsxs)("div",{children:[e.isOwner&&Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{onClick:e.goToEditMode,children:"Edit"})}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("b",{children:"Full name: "}),e.profile.fullName]}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("b",{children:"Looking for a job: "}),e.profile.lookingForAJob?"yes":"No"]}),e.profile.lookingForAJob&&Object(ie.jsx)("div",{children:Object(ie.jsxs)("b",{children:["My professional skills: ",e.profile.lookingForAJobDescription]})}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("b",{children:"About me: "}),e.profile.aboutMe]}),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("b",{children:"Contacts: "}),Object.keys(e.profile.contacts).map((function(t){return Object(ie.jsx)(rt,{contactTitle:t,contactValue:e.profile.contacts[t]},t)}))]})]})},rt=function(e){var t=e.contactTitle,n=e.contactValue;return Object(ie.jsxs)("div",{className:et.a.contact,children:[Object(ie.jsxs)("b",{children:[t,":"]})," ",n]})},it=function(e){var t=Object(r.useState)(!1),n=Object(Me.a)(t,2),s=n[0],i=n[1];if(!e.profile)return Object(ie.jsx)(Ye,{});return Object(ie.jsxs)("div",{className:et.a.content,children:[Object(ie.jsxs)("div",{className:et.a.descriptionBlock,children:[Object(ie.jsx)("img",{className:et.a.album,src:e.profile.photos.large||De,alt:""}),e.isOwner&&Object(ie.jsx)("input",{type:"file",onChange:function(t){var n;(null===(n=t.target.files)||void 0===n?void 0:n.length)&&e.savePhoto(t.target.files[0])}}),s?Object(ie.jsx)(nt,{initialValues:e.profile,onSubmit:function(t){e.saveProfile(t),i(!1)},profile:e.profile}):Object(ie.jsx)(st,{profile:e.profile,isOwner:e.isOwner,goToEditMode:function(){i(!0)}})]}),Object(ie.jsx)(tt,{status:e.status,updateStatus:e.updateStatus})]})},at=n(102),ct=n.n(at),ot=n(142),ut=n.n(ot),lt=function(e){return Object(ie.jsxs)("div",{className:ut.a.item,children:[Object(ie.jsx)("img",{src:"https://avatars.mds.yandex.net/get-ott/374297/2a000001616b87458162c9216ccd5144e94d/678x380",alt:""}),e.message,Object(ie.jsx)("div",{children:Object(ie.jsxs)("span",{children:["like ",e.likesCount]})})]})},dt=pe(10),jt=Object(be.a)({form:"posts"})((function(e){return Object(ie.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(ie.jsx)("div",{children:Pe('"Enter new post text',"newPostText",[fe,dt],ve)}),Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{children:"Add post"})})]})})),bt=function(e){var t=e.posts.map((function(e){return Object(ie.jsx)(lt,{message:e.text,likesCount:e.likesCount},e.id)}));return Object(ie.jsxs)("div",{className:ct.a.postsBlock,children:[Object(ie.jsx)("h3",{children:"My post"}),Object(ie.jsx)(jt,{onSubmit:function(t){e.addPost(t.newPostText)}}),Object(ie.jsx)("div",{className:ct.a.posts,children:t})]})},ft=Object(Ne.b)((function(e){return{posts:e.profilePage.posts}}),{addPost:S.addPostActionCreator})(bt),pt=function(e){return Object(ie.jsxs)("div",{className:Qe.a.content,children:[Object(ie.jsx)(it,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),Object(ie.jsx)(ft,{})]})},ht=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),e?(this.props.getUserProfile(e),this.props.getStatus(e)):console.error("ID should exists in URI or state")}},{key:"render",value:function(){return Object(ie.jsx)("div",{children:Object(ie.jsx)(pt,Object(j.a)(Object(j.a)({isOwner:!this.props.match.params.userId},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))})}}]),n}(i.a.Component),Ot=Object(c.d)(Object(Ne.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:P,getStatus:function(e){return function(t){O(e).then((function(e){t(S.setStatus(e))}))}},updateStatus:function(e){return function(t){g(e).then((function(n){0===n.data.resultCode&&t(S.setStatus(e))}))}},savePhoto:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:0===(s=t.sent).resultCode&&n(S.savePhotoSuccess(s.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(l.a)(u.a.mark((function t(n,s){var r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s().auth.userId,t.next=3,x(e);case 3:0===(i=t.sent).resultCode?n(P(r)):n(Object(b.a)("editProfile",{_error:i.messages[0]}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}),re.f)(ht),gt=n(81),mt=n.n(gt),xt=function(e){return Object(ie.jsxs)("header",{className:mt.a.header,children:[Object(ie.jsx)("img",{className:mt.a.logo,src:"https://cdn.worldvectorlogo.com/logos/mediafire-1-3.svg",alt:""}),Object(ie.jsx)("div",{className:mt.a.loginBlock,children:e.isAuth?Object(ie.jsxs)("div",{children:[e.login," - ",Object(ie.jsx)("button",{onClick:e.logout,children:"Log out"})]}):Object(ie.jsx)(se.b,{to:"/login",children:"Login"})})]})},vt=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"render",value:function(){return Object(ie.jsx)(xt,Object(j.a)({},this.props))}}]),n}(i.a.Component),St=Object(Ne.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:e.sent.resultCode===s.Success&&t(M(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(vt),Pt=Object(be.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(ie.jsxs)("form",{onSubmit:t,children:[Pe("Email","email",[fe],Se),Pe("Password","password",[fe],Se,{type:"password"}),Pe(void 0,"rememberMe",[fe],Se,{type:"checkbox"}),n&&Object(ie.jsx)("div",{className:ge.a.formSummaryError,children:n}),Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{children:"Login"})})]})})),_t=Object(Ne.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var r=Object(l.a)(u.a.mark((function r(i){var a,c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L(e,t,n);case 2:(a=r.sent).resultCode===s.Success?i(z()):(c=a.messages.length>0?a.messages[0]:"Some error",i(Object(b.a)("login",{_error:c})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(ie.jsx)(re.a,{to:"/profile"}):Object(ie.jsxs)("div",{children:[Object(ie.jsx)("h1",{children:"Login"}),Object(ie.jsx)(Pt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]})})),Ct=function(e){Object(te.a)(n,e);var t=Object(ne.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(ee.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(ie.jsx)(se.a,{basename:"/react-social-network",children:Object(ie.jsxs)("div",{className:"app-wrapper",children:[Object(ie.jsx)(St,{}),Object(ie.jsx)(Ae,{}),Object(ie.jsxs)("div",{className:"app-wrapper-content",children:[Object(ie.jsx)(re.b,{path:"/dialogs",render:function(){return Object(ie.jsx)(Ie,{})}}),Object(ie.jsx)(re.b,{path:"/profile/:userId?",render:function(){return Object(ie.jsx)(Ot,{})}}),Object(ie.jsx)(re.b,{path:"/users",render:function(){return Object(ie.jsx)(Ze,{})}}),Object(ie.jsx)(re.b,{path:"/news",component:ae}),Object(ie.jsx)(re.b,{path:"/music",component:ce}),Object(ie.jsx)(re.b,{path:"/settings",component:oe}),Object(ie.jsx)(re.b,{path:"/login",component:_t})]})]})}):Object(ie.jsx)(Ye,{})}}]),n}(r.Component),wt=Object(Ne.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(z()).then((function(){e(V.initializedSuccess())}))}}})(Ct);Q.a.render(Object(ie.jsx)(Ne.a,{store:Z,children:Object(ie.jsx)(wt,{})}),document.getElementById("root")),a()},30:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__3RYuC",dialogsItems:"Dialogs_dialogsItems__3IUAr",active:"Dialogs_active__2PPCz",dialog:"Dialogs_dialog__3WC3I",messages:"Dialogs_messages__FuCIo",message:"Dialogs_message__1nwrv"}},43:function(e,t,n){e.exports={formControl:"FormsControls_formControl__2Dg07",error:"FormsControls_error__1ApSp",formSummaryError:"FormsControls_formSummaryError__T1IGs"}},46:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__1P51r",contact:"ProfileInfo_contact__3xWC8"}},52:function(e,t,n){e.exports={paginator:"Users_paginator__yjAOx",pageNumber:"Users_pageNumber__3wN7K",selectedPage:"Users_selectedPage__1RWrX",userPhoto:"Users_userPhoto__KTviU"}},81:function(e,t,n){e.exports={header:"Header_header__33sCE",logo:"Header_logo__j0zlY",loginBlock:"Header_loginBlock__3oN2m"}}},[[296,1,2]]]);
//# sourceMappingURL=main.2ee346a0.chunk.js.map